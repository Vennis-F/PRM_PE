{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useContext, useState, useCallback } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Container } from \"native-base\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport OrderCard from \"../../Shared/OrderCard\";\nimport axios from \"axios\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport AuthGlobal from \"../../Context/store/AuthGlobal\";\nimport { logoutUser } from \"../../Context/actions/Auth.actions\";\nimport { useEffect } from \"react/cjs/react.development\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar UserProfile = function UserProfile(props) {\n  var context = useContext(AuthGlobal);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    userProfile = _useState2[0],\n    setUserProfile = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    orders = _useState4[0],\n    setOrders = _useState4[1];\n  useFocusEffect(useCallback(function () {\n    if (context.stateUser.isAuthenticated === false || context.stateUser.isAuthenticated === null) {\n      props.navigation.navigate(\"Login\");\n    }\n    console.log(\"[context stateUser] \", context.stateUser);\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      axios.get(baseURL + \"users/\" + context.stateUser.user.userId, {\n        headers: {\n          Authorization: \"Bearer \" + res\n        }\n      }).then(function (user) {\n        return setUserProfile(user.data);\n      });\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"orders\").then(function (x) {\n      var data = x.data;\n      console.log(data);\n      var userOrders = data.filter(function (order) {\n        return order.user._id === context.stateUser.user.userId;\n      });\n      setOrders(userOrders);\n    }).catch(function (error) {\n      return console.log(\"[ERROR getOrders_UserProfile]\", error);\n    });\n    return function () {\n      setUserProfile();\n      setOrders();\n    };\n  }, [context.stateUser.isAuthenticated]));\n  return _jsx(Container, {\n    style: styles.container,\n    children: _jsxs(ScrollView, {\n      contentContainerStyle: styles.subContainer,\n      children: [_jsx(Text, {\n        style: {\n          fontSize: 30\n        },\n        children: userProfile ? userProfile.name : \"\"\n      }), _jsxs(View, {\n        style: {\n          marginTop: 20\n        },\n        children: [_jsxs(Text, {\n          style: {\n            margin: 10\n          },\n          children: [\"Email: \", userProfile ? userProfile.email : \"\"]\n        }), _jsxs(Text, {\n          style: {\n            margin: 10\n          },\n          children: [\"Phone: \", userProfile ? userProfile.phone : \"\"]\n        })]\n      }), _jsx(View, {\n        style: {\n          marginTop: 80\n        },\n        children: _jsx(Button, {\n          title: \"Sign Out\",\n          onPress: function onPress() {\n            return [AsyncStorage.removeItem(\"jwt\"), logoutUser(context.dispatch)];\n          }\n        })\n      }), _jsxs(View, {\n        style: styles.order,\n        children: [_jsx(Text, {\n          style: {\n            fontSize: 20\n          },\n          children: \"My Orders\"\n        }), _jsx(View, {\n          children: orders ? orders.map(function (x) {\n            return _jsx(OrderCard, _objectSpread({}, x), x.id);\n          }) : _jsx(View, {\n            style: styles.order,\n            children: _jsx(Text, {\n              children: \"You have no orders\"\n            })\n          })\n        })]\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  subContainer: {\n    alignItems: \"center\",\n    marginTop: 60\n  },\n  order: {\n    marginTop: 20,\n    alignItems: \"center\",\n    marginBottom: 60\n  }\n});\nexport default UserProfile;","map":{"version":3,"names":["React","useContext","useState","useCallback","View","Text","ScrollView","Button","StyleSheet","Container","useFocusEffect","AsyncStorage","OrderCard","axios","baseURL","AuthGlobal","logoutUser","useEffect","jsx","_jsx","jsxs","_jsxs","UserProfile","props","context","_useState","_useState2","_slicedToArray","userProfile","setUserProfile","_useState3","_useState4","orders","setOrders","stateUser","isAuthenticated","navigation","navigate","console","log","getItem","then","res","get","user","userId","headers","Authorization","data","catch","error","x","userOrders","filter","order","_id","style","styles","container","children","contentContainerStyle","subContainer","fontSize","name","marginTop","margin","email","phone","title","onPress","removeItem","dispatch","map","_objectSpread","id","create","flex","alignItems","marginBottom"],"sources":["D:/Learn/Nodejs/PRM_SWD_Project/mobile/easy-shop/Screens/User/UserProfile.js"],"sourcesContent":["import React, { useContext, useState, useCallback } from \"react\";\r\nimport { View, Text, ScrollView, Button, StyleSheet } from \"react-native\";\r\nimport { Container } from \"native-base\";\r\nimport { useFocusEffect } from \"@react-navigation/native\";\r\nimport { AsyncStorage } from \"react-native\";\r\nimport OrderCard from \"../../Shared/OrderCard\";\r\n\r\nimport axios from \"axios\";\r\nimport baseURL from \"../../assets/common/baseUrl\";\r\n\r\nimport AuthGlobal from \"../../Context/store/AuthGlobal\";\r\nimport { logoutUser } from \"../../Context/actions/Auth.actions\";\r\nimport { useEffect } from \"react/cjs/react.development\";\r\n\r\nconst UserProfile = (props) => {\r\n  const context = useContext(AuthGlobal);\r\n  const [userProfile, setUserProfile] = useState();\r\n  const [orders, setOrders] = useState();\r\n\r\n  useFocusEffect(\r\n    useCallback(() => {\r\n      if (\r\n        context.stateUser.isAuthenticated === false ||\r\n        context.stateUser.isAuthenticated === null\r\n      ) {\r\n        props.navigation.navigate(\"Login\");\r\n      }\r\n\r\n      console.log(\"[context stateUser] \", context.stateUser);\r\n      AsyncStorage.getItem(\"jwt\")\r\n        .then((res) => {\r\n          axios\r\n            .get(`${baseURL}users/${context.stateUser.user.userId}`, {\r\n              headers: { Authorization: `Bearer ${res}` },\r\n            })\r\n            .then((user) => setUserProfile(user.data));\r\n        })\r\n        .catch((error) => console.log(error));\r\n\r\n      axios\r\n        .get(`${baseURL}orders`)\r\n        .then((x) => {\r\n          const data = x.data;\r\n          console.log(data);\r\n          const userOrders = data.filter(\r\n            (order) => order.user._id === context.stateUser.user.userId\r\n          );\r\n          setOrders(userOrders);\r\n        })\r\n        .catch((error) => console.log(\"[ERROR getOrders_UserProfile]\", error));\r\n\r\n      return () => {\r\n        setUserProfile();\r\n        setOrders();\r\n      };\r\n    }, [context.stateUser.isAuthenticated])\r\n  );\r\n\r\n  return (\r\n    <Container style={styles.container}>\r\n      <ScrollView contentContainerStyle={styles.subContainer}>\r\n        <Text style={{ fontSize: 30 }}>\r\n          {userProfile ? userProfile.name : \"\"}\r\n        </Text>\r\n        <View style={{ marginTop: 20 }}>\r\n          <Text style={{ margin: 10 }}>\r\n            Email: {userProfile ? userProfile.email : \"\"}\r\n          </Text>\r\n          <Text style={{ margin: 10 }}>\r\n            Phone: {userProfile ? userProfile.phone : \"\"}\r\n          </Text>\r\n        </View>\r\n        <View style={{ marginTop: 80 }}>\r\n          <Button\r\n            title={\"Sign Out\"}\r\n            onPress={() => [\r\n              AsyncStorage.removeItem(\"jwt\"),\r\n              logoutUser(context.dispatch),\r\n            ]}\r\n          />\r\n        </View>\r\n        <View style={styles.order}>\r\n          <Text style={{ fontSize: 20 }}>My Orders</Text>\r\n          <View>\r\n            {orders ? (\r\n              orders.map((x) => {\r\n                return <OrderCard key={x.id} {...x} />;\r\n              })\r\n            ) : (\r\n              <View style={styles.order}>\r\n                <Text>You have no orders</Text>\r\n              </View>\r\n            )}\r\n          </View>\r\n        </View>\r\n      </ScrollView>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n  },\r\n  subContainer: {\r\n    alignItems: \"center\",\r\n    marginTop: 60,\r\n  },\r\n  order: {\r\n    marginTop: 20,\r\n    alignItems: \"center\",\r\n    marginBottom: 60,\r\n  },\r\n});\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}