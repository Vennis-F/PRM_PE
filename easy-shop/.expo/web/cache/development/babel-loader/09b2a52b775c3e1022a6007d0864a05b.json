{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from \"axios\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport { add } from \"react-native-reanimated\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar _Dimensions$get = Dimensions.get(\"window\"),\n  width = _Dimensions$get.width;\nvar Item = function Item(props) {\n  return _jsxs(View, {\n    style: styles.item,\n    children: [_jsx(Text, {\n      children: props.item.name\n    }), _jsx(EasyButton, {\n      bgThird: true,\n      medium: true,\n      onPress: function onPress() {\n        return props.delete(props.item._id);\n      },\n      children: _jsx(Text, {\n        style: {\n          color: \"#009e96\",\n          fontWeight: \"bold\"\n        },\n        children: \"Delete\"\n      })\n    })]\n  });\n};\nvar Categories = function Categories(props) {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    categories = _useState2[0],\n    setCategories = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    categoryName = _useState4[0],\n    setCategoryName = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    token = _useState6[0],\n    setToken = _useState6[1];\n  useEffect(function () {\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      setToken(res);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"categories\").then(function (res) {\n      return setCategories(res.data);\n    }).catch(function (error) {\n      return alert(\"Error to load categories\");\n    });\n    return function () {\n      setCategories();\n      setToken();\n    };\n  }, []);\n  var addCategory = function addCategory() {\n    var category = {\n      name: categoryName\n    };\n    var config = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    axios.post(baseURL + \"categories\", category, config).then(function (res) {\n      return setCategories([].concat(_toConsumableArray(categories), [res.data]));\n    }).catch(function (error) {\n      return alert(\"Error to load categories\");\n    });\n    setCategoryName(\"\");\n  };\n  var deleteCategory = function deleteCategory(id) {\n    var config = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    axios.delete(baseURL + \"categories/\" + id, config).then(function (res) {\n      var newCategories = categories.filter(function (item) {\n        return item.id !== id;\n      });\n      setCategories(newCategories);\n    }).catch(function (error) {\n      return alert(\"Error to load categories\");\n    });\n  };\n  return _jsxs(View, {\n    style: {\n      position: \"relative\",\n      height: \"100%\"\n    },\n    children: [_jsx(View, {\n      style: {\n        marginBottom: 60\n      },\n      children: _jsx(FlatList, {\n        data: categories,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n            index = _ref.index;\n          return _jsx(Item, {\n            item: item,\n            index: index,\n            delete: deleteCategory\n          });\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        }\n      })\n    }), _jsxs(View, {\n      style: styles.bottomBar,\n      children: [_jsx(View, {\n        children: _jsx(Text, {\n          children: \"Add Category\"\n        })\n      }), _jsx(View, {\n        style: {\n          width: width / 2.5\n        },\n        children: _jsx(TextInput, {\n          value: categoryName,\n          style: styles.input,\n          onChangeText: function onChangeText(text) {\n            return setCategoryName(text);\n          }\n        })\n      }), _jsx(View, {\n        children: _jsx(EasyButton, {\n          medium: true,\n          third: true,\n          onPress: function onPress() {\n            return addCategory();\n          },\n          children: _jsx(Text, {\n            style: {\n              color: \"white\",\n              fontWeight: \"bold\"\n            },\n            children: \"Submit\"\n          })\n        })\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  bottomBar: {\n    backgroundColor: \"white\",\n    width: width,\n    height: 60,\n    padding: 2,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    position: \"absolute\",\n    bottom: 0,\n    left: 0\n  },\n  input: {\n    height: 40,\n    borderColor: \"gray\",\n    borderWidth: 1\n  },\n  item: {\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 1,\n    elevation: 1,\n    padding: 5,\n    margin: 5,\n    backgroundColor: \"white\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    borderRadius: 5\n  }\n});\nexport default Categories;","map":{"version":3,"names":["React","useEffect","useState","View","Text","FlatList","Dimensions","TextInput","StyleSheet","EasyButton","baseURL","axios","AsyncStorage","add","jsx","_jsx","jsxs","_jsxs","_Dimensions$get","get","width","Item","props","style","styles","item","children","name","bgThird","medium","onPress","delete","_id","color","fontWeight","Categories","_useState","_useState2","_slicedToArray","categories","setCategories","_useState3","_useState4","categoryName","setCategoryName","_useState5","_useState6","token","setToken","getItem","then","res","catch","error","console","log","data","alert","addCategory","category","config","headers","Authorization","post","concat","_toConsumableArray","deleteCategory","id","newCategories","filter","position","height","marginBottom","renderItem","_ref","index","keyExtractor","bottomBar","value","input","onChangeText","text","third","create","backgroundColor","padding","flexDirection","alignItems","justifyContent","bottom","left","borderColor","borderWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","margin","borderRadius"],"sources":["D:/Learn/Nodejs/PRM_SWD_Project/mobile/easy-shop/Screens/Admin/Categories.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  FlatList,\r\n  Dimensions,\r\n  TextInput,\r\n  StyleSheet,\r\n} from \"react-native\";\r\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\r\nimport baseURL from \"../../assets/common/baseUrl\";\r\nimport axios from \"axios\";\r\nimport { AsyncStorage } from \"react-native\";\r\nimport { add } from \"react-native-reanimated\";\r\n\r\nvar { width } = Dimensions.get(\"window\");\r\n\r\nconst Item = (props) => {\r\n  return (\r\n    <View style={styles.item}>\r\n      <Text>{props.item.name}</Text>\r\n      <EasyButton bgThird medium onPress={() => props.delete(props.item._id)}>\r\n        <Text style={{ color: \"#009e96\", fontWeight: \"bold\" }}>Delete</Text>\r\n      </EasyButton>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst Categories = (props) => {\r\n  const [categories, setCategories] = useState([]);\r\n  const [categoryName, setCategoryName] = useState();\r\n  const [token, setToken] = useState();\r\n\r\n  useEffect(() => {\r\n    AsyncStorage.getItem(\"jwt\")\r\n      .then((res) => {\r\n        setToken(res);\r\n      })\r\n      .catch((error) => console.log(error));\r\n\r\n    axios\r\n      .get(`${baseURL}categories`)\r\n      .then((res) => setCategories(res.data))\r\n      .catch((error) => alert(\"Error to load categories\"));\r\n\r\n    return () => {\r\n      setCategories();\r\n      setToken();\r\n    };\r\n  }, []);\r\n\r\n  const addCategory = () => {\r\n    const category = {\r\n      name: categoryName,\r\n    };\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n\r\n    axios\r\n      .post(`${baseURL}categories`, category, config)\r\n      .then((res) => setCategories([...categories, res.data]))\r\n      .catch((error) => alert(\"Error to load categories\"));\r\n\r\n    setCategoryName(\"\");\r\n  };\r\n\r\n  const deleteCategory = (id) => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n\r\n    axios\r\n      .delete(`${baseURL}categories/${id}`, config)\r\n      .then((res) => {\r\n        const newCategories = categories.filter((item) => item.id !== id);\r\n        setCategories(newCategories);\r\n      })\r\n      .catch((error) => alert(\"Error to load categories\"));\r\n  };\r\n\r\n  return (\r\n    <View style={{ position: \"relative\", height: \"100%\" }}>\r\n      <View style={{ marginBottom: 60 }}>\r\n        <FlatList\r\n          data={categories}\r\n          renderItem={({ item, index }) => (\r\n            <Item item={item} index={index} delete={deleteCategory} />\r\n          )}\r\n          keyExtractor={(item) => item.id}\r\n        />\r\n      </View>\r\n      <View style={styles.bottomBar}>\r\n        <View>\r\n          <Text>Add Category</Text>\r\n        </View>\r\n        <View style={{ width: width / 2.5 }}>\r\n          <TextInput\r\n            value={categoryName}\r\n            style={styles.input}\r\n            onChangeText={(text) => setCategoryName(text)}\r\n          />\r\n        </View>\r\n        <View>\r\n          <EasyButton medium third onPress={() => addCategory()}>\r\n            <Text style={{ color: \"white\", fontWeight: \"bold\" }}>Submit</Text>\r\n          </EasyButton>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  bottomBar: {\r\n    backgroundColor: \"white\",\r\n    width: width,\r\n    height: 60,\r\n    padding: 2,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    left: 0,\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderColor: \"gray\",\r\n    borderWidth: 1,\r\n  },\r\n  item: {\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 1,\r\n    elevation: 1,\r\n    padding: 5,\r\n    margin: 5,\r\n    backgroundColor: \"white\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    borderRadius: 5,\r\n  },\r\n});\r\n\r\nexport default Categories;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}